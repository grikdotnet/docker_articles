Docker myths and recipes. Data Volume container.
========
*незаконченная статья*

Начало: https://github.com/grikdotnet/docker_articles/blob/master/docker1.md

В docker есть любопытный инструмент, который называется [Data Volume сontainer](https://docs.docker.com/userguide/dockervolumes/#creating-and-mounting-a-data-volume-container). 
У меня он ассоциациируется с data transfer object.
В документации предлагают создавать его из образа операционной системы.

Вот что нужно знать про тома в docker:
* Data Volume - это подмонтированный в контейнер каталог, внешний для контейнера.
* Если не указать какой каталог монтировать, будет создан новый каталог в /var/lib/docker/volumes/ с непредсказуемым 64-символьным названием.
* При удалении контейнера volume-каталоги не удаляются. Создавая контейнеры с томами и удаляя затем контейнеры, можно замусорить /var/lib/docker/volumes/ - разобораться к чему относился конкретный каталог можно будет в лучшем случае по логам docker.
* В каталог /var/lib/docker/volumes/ доступ есть только для рута, так что просмотреть содержимое автоматически созданных томов можно через `sudo`
* Удобнее монтировать свои каталоги чтобы просматривать их содержимое и удалять при ненужности.
* Данные из тома не экспортируются при выполнении `docker export`, `docker save` и не сохранятся в образ командой `docker commit`

Несмотря на все недостатки, инструмент этот настолько удобный, что использовать его стоит.

Я создаю свой контейнер на базе пустого образа, который называется "scratch".
Если я создам его из образа базы данных, как предлагают в документации, при экспорте контейнера в дамп пойдет вся операционная система, и размер файла составит порядка 500 мегабайт. Раздавать дамп такого размера неудобно, поэтому я
создам пустой контейнер, в котором будут только мои файлы - база данных, приложение.
К сожалению, создать пустой контейнер напрямую нельзя, сначала надо отнаследоваться от scratch и создать пустой образ.
```console
$ mkdir data_volume
$ cd data_volume/
$ echo "FROM scratch">Dockerfile
$ echo "CMD true">>Dockerfile
$ docker build -t grikdotnet/data_volume .
$ cd ..; rm -rf data_volume/
$ docker create -v /var/lib/mysql --name mysql_data grikdotnet/data_volume
```
Совсем пустой образ Docker создать не разрешает, а с LABEL или CMD - можно.



